<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:EcoBank.App.ViewModels.Shell"
             xmlns:shad="clr-namespace:ShadUI;assembly=ShadUI"
             x:Class="EcoBank.App.Views.Shell.MainShellView"
             x:DataType="vm:MainShellViewModel">

  <Panel>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         WIDE layout : sidebar latÃ©rale
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <Grid ColumnDefinitions="Auto,*"
          IsVisible="{Binding $parent[UserControl].Bounds.Width, Converter={x:Static vm:WidthToBoolConverter.IsWide}}">

      <shad:Sidebar Grid.Column="0">
        <shad:Sidebar.Header>
          <StackPanel Orientation="Horizontal" Spacing="10" Margin="12,0,0,24">
            <TextBlock Text="ðŸ¦" FontSize="24"/>
            <TextBlock Text="EcoBank" FontSize="18" FontWeight="Bold" VerticalAlignment="Center"/>
          </StackPanel>
        </shad:Sidebar.Header>
        <ItemsControl ItemsSource="{Binding Tabs}">
          <ItemsControl.ItemTemplate>
            <DataTemplate x:DataType="vm:NavTab">
              <shad:SidebarItem Content="{Binding Label}"
                                Command="{Binding $parent[ItemsControl].((vm:MainShellViewModel)DataContext).SelectTabCommand}"
                                CommandParameter="{Binding}">
                <shad:SidebarItem.Icon>
                  <TextBlock Text="{Binding Icon}" FontSize="18"/>
                </shad:SidebarItem.Icon>
              </shad:SidebarItem>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </shad:Sidebar>

      <ContentControl Grid.Column="1" Content="{Binding CurrentContent}"/>
    </Grid>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         NARROW layout : barre du bas
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <Grid RowDefinitions="*,Auto"
          IsVisible="{Binding $parent[UserControl].Bounds.Width, Converter={x:Static vm:WidthToBoolConverter.IsNarrow}}">

      <ContentControl Grid.Row="0" Content="{Binding CurrentContent}"/>

      <!-- Bottom nav bar -->
      <Border Grid.Row="1"
              Background="White"
              BoxShadow="0 -1 8 0 #18000000"
              Padding="0,6,0,4">
        <ItemsControl ItemsSource="{Binding Tabs}">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <UniformGrid Rows="1"/>
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate x:DataType="vm:NavTab">
              <Button Classes="NavItem"
                      HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                      Command="{Binding $parent[ItemsControl].((vm:MainShellViewModel)DataContext).SelectTabCommand}"
                      CommandParameter="{Binding}">
                <StackPanel Spacing="2" HorizontalAlignment="Center">
                  <TextBlock Text="{Binding Icon}" FontSize="20" HorizontalAlignment="Center">
                    <TextBlock.Foreground>
                      <MultiBinding Converter="{x:Static vm:NavTabActiveColorConverter.Instance}">
                        <Binding Path="Key"/>
                        <Binding Path="$parent[ItemsControl].((vm:MainShellViewModel)DataContext).SelectedTab.Key"/>
                      </MultiBinding>
                    </TextBlock.Foreground>
                  </TextBlock>
                  <TextBlock Text="{Binding Label}" FontSize="10" HorizontalAlignment="Center">
                    <TextBlock.Foreground>
                      <MultiBinding Converter="{x:Static vm:NavTabActiveColorConverter.Instance}">
                        <Binding Path="Key"/>
                        <Binding Path="$parent[ItemsControl].((vm:MainShellViewModel)DataContext).SelectedTab.Key"/>
                      </MultiBinding>
                    </TextBlock.Foreground>
                  </TextBlock>
                </StackPanel>
              </Button>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </Border>
    </Grid>

  </Panel>
</UserControl>
