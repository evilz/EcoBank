<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:EcoBank.App.ViewModels.Shell"
             xmlns:shad="clr-namespace:ShadUI;assembly=ShadUI"
             xmlns:ic="using:IconPacks.Avalonia.Material"
             x:Class="EcoBank.App.Views.Shell.MainShellView"
             x:DataType="vm:MainShellViewModel">

  <Panel>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         WIDE layout : sidebar latÃ©rale
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <Grid ColumnDefinitions="Auto,*"
          IsVisible="{Binding $parent[UserControl].Bounds.Width, Converter={x:Static vm:WidthToBoolConverter.IsWide}}">

      <shad:Sidebar Grid.Column="0">
        <shad:Sidebar.Header>
          <StackPanel Orientation="Horizontal" Spacing="10" Margin="12,0,0,24">
            <TextBlock Text="ðŸ¦" FontSize="24"/>
            <TextBlock Text="EcoBank" FontSize="18" FontWeight="Bold" VerticalAlignment="Center"/>
          </StackPanel>
        </shad:Sidebar.Header>
        <ItemsControl ItemsSource="{Binding Tabs}">
          <ItemsControl.ItemTemplate>
            <DataTemplate x:DataType="vm:NavTab">
              <shad:SidebarItem Content="{Binding Label}"
                                Command="{Binding $parent[ItemsControl].((vm:MainShellViewModel)DataContext).SelectTabCommand}"
                                CommandParameter="{Binding}">
                <shad:SidebarItem.Icon>
                  <TextBlock Text="{Binding Icon}" FontSize="18"/>
                </shad:SidebarItem.Icon>
              </shad:SidebarItem>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </shad:Sidebar>

      <ContentControl Grid.Column="1" Content="{Binding CurrentContent}"/>
    </Grid>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         NARROW layout : barre du bas
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <Grid RowDefinitions="*,Auto"
          IsVisible="{Binding $parent[UserControl].Bounds.Width, Converter={x:Static vm:WidthToBoolConverter.IsNarrow}}">

      <ContentControl Grid.Row="0" Content="{Binding CurrentContent}"/>

      <!-- Bottom nav bar -->
      <Border Grid.Row="1"
              Background="White"
              BoxShadow="0 -1 8 0 #18000000"
              Padding="0,6,0,4">
        <Grid ColumnDefinitions="*,*,*,*,*">

          <!-- Accueil -->
          <Button Grid.Column="0" Classes="NavItem"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  Command="{Binding SelectTabCommand}"
                  CommandParameter="{Binding Tabs[0]}">
            <StackPanel Spacing="2" HorizontalAlignment="Center">
              <ic:PackIconMaterial Kind="Home" Width="24" Height="24"
                                   HorizontalAlignment="Center"
                                   Foreground="{Binding SelectedTab.Key,
                                     Converter={x:Static vm:NavActiveColorConverter.ForHome}}"/>
              <TextBlock Text="Accueil" FontSize="10" HorizontalAlignment="Center"
                         Foreground="{Binding SelectedTab.Key,
                           Converter={x:Static vm:NavActiveColorConverter.ForHome}}"/>
            </StackPanel>
          </Button>

          <!-- Carte -->
          <Button Grid.Column="1" Classes="NavItem"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  Command="{Binding SelectTabCommand}"
                  CommandParameter="{Binding Tabs[1]}">
            <StackPanel Spacing="2" HorizontalAlignment="Center">
              <ic:PackIconMaterial Kind="CreditCardOutline" Width="24" Height="24"
                                   HorizontalAlignment="Center"
                                   Foreground="{Binding SelectedTab.Key,
                                     Converter={x:Static vm:NavActiveColorConverter.ForCards}}"/>
              <TextBlock Text="Carte" FontSize="10" HorizontalAlignment="Center"
                         Foreground="{Binding SelectedTab.Key,
                           Converter={x:Static vm:NavActiveColorConverter.ForCards}}"/>
            </StackPanel>
          </Button>

          <!-- Contact -->
          <Button Grid.Column="2" Classes="NavItem"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  Command="{Binding SelectTabCommand}"
                  CommandParameter="{Binding Tabs[2]}">
            <StackPanel Spacing="2" HorizontalAlignment="Center">
              <ic:PackIconMaterial Kind="MessageOutline" Width="24" Height="24"
                                   HorizontalAlignment="Center"
                                   Foreground="{Binding SelectedTab.Key,
                                     Converter={x:Static vm:NavActiveColorConverter.ForContact}}"/>
              <TextBlock Text="Contact" FontSize="10" HorizontalAlignment="Center"
                         Foreground="{Binding SelectedTab.Key,
                           Converter={x:Static vm:NavActiveColorConverter.ForContact}}"/>
            </StackPanel>
          </Button>

          <!-- Virement -->
          <Button Grid.Column="3" Classes="NavItem"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  Command="{Binding SelectTabCommand}"
                  CommandParameter="{Binding Tabs[3]}">
            <StackPanel Spacing="2" HorizontalAlignment="Center">
              <ic:PackIconMaterial Kind="SwapHorizontal" Width="24" Height="24"
                                   HorizontalAlignment="Center"
                                   Foreground="{Binding SelectedTab.Key,
                                     Converter={x:Static vm:NavActiveColorConverter.ForTransfer}}"/>
              <TextBlock Text="Virement" FontSize="10" HorizontalAlignment="Center"
                         Foreground="{Binding SelectedTab.Key,
                           Converter={x:Static vm:NavActiveColorConverter.ForTransfer}}"/>
            </StackPanel>
          </Button>

          <!-- Menu -->
          <Button Grid.Column="4" Classes="NavItem"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  Command="{Binding SelectTabCommand}"
                  CommandParameter="{Binding Tabs[4]}">
            <StackPanel Spacing="2" HorizontalAlignment="Center">
              <ic:PackIconMaterial Kind="Menu" Width="24" Height="24"
                                   HorizontalAlignment="Center"
                                   Foreground="{Binding SelectedTab.Key,
                                     Converter={x:Static vm:NavActiveColorConverter.ForMenu}}"/>
              <TextBlock Text="Menu" FontSize="10" HorizontalAlignment="Center"
                         Foreground="{Binding SelectedTab.Key,
                           Converter={x:Static vm:NavActiveColorConverter.ForMenu}}"/>
            </StackPanel>
          </Button>

        </Grid>
      </Border>
    </Grid>

  </Panel>
</UserControl>
