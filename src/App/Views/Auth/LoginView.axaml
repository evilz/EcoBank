<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:EcoBank.App.ViewModels.Auth"
             xmlns:shad="clr-namespace:ShadUI;assembly=ShadUI"
             x:Class="EcoBank.App.Views.Auth.LoginView"
             x:DataType="vm:LoginViewModel"
             Background="{DynamicResource BackgroundColor}">

  <Grid RowDefinitions="*,Auto">
    <!-- Main content area with gradient background -->
    <ScrollViewer Grid.Row="0">
      <StackPanel Spacing="0" Margin="0">
        <!-- Decorative gradient background section -->
        <Border Height="300"
                Background="{DynamicResource BackgroundColor}"
                Padding="24">
          <Grid RowDefinitions="Auto,*" ColumnDefinitions="*">
            <!-- App Logo and Title -->
            <StackPanel Grid.Row="0"
                        HorizontalAlignment="Center"
                        Spacing="4"
                        Margin="0,32,0,0">
              <TextBlock Text="ðŸŒ¿"
                         FontSize="48"
                         HorizontalAlignment="Center"/>
              <TextBlock Text="EcoBank"
                         FontSize="36"
                         FontWeight="Bold"
                         HorizontalAlignment="Center"
                         Foreground="#7ED957"/>
            </StackPanel>

            <!-- Decorative elements (simulated with shapes) -->
            <Canvas Grid.Row="0" Grid.RowSpan="2" IsHitTestVisible="False">
              <!-- Yellow circle (top right) -->
              <Ellipse Canvas.Left="250" Canvas.Top="20" Width="120" Height="120"
                       Fill="#C6FF00" Opacity="0.25"/>
              <!-- Green circle (bottom left) -->
              <Ellipse Canvas.Left="-40" Canvas.Top="150" Width="150" Height="150"
                       Fill="#7ED957" Opacity="0.15"/>
            </Canvas>
          </Grid>
        </Border>

        <!-- Main content card -->
        <StackPanel Spacing="0" Margin="24" MaxWidth="500" HorizontalAlignment="Center">
          <!-- Heading section -->
          <StackPanel Spacing="8" Margin="0,0,0,24">
            <TextBlock Text="Votre Banque,"
                       FontSize="28"
                       FontWeight="Bold"
                       LineHeight="36"/>
            <TextBlock Text="Plus Simple"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="#7ED957"
                       LineHeight="36"/>
            <TextBlock Text="GÃ©rez vos finances en toute simplicitÃ© et sÃ©curitÃ©."
                       FontSize="15"
                       Foreground="{DynamicResource MutedColor}"
                       Margin="0,8,0,0"
                       TextWrapping="Wrap"/>
          </StackPanel>

          <!-- ShadUI Card container with form -->
          <shad:Card Margin="0,0,0,24">
            <StackPanel Spacing="16">

              <!-- Client ID -->
              <TextBox shad:ControlAssist.Label="Client ID"
                       Text="{Binding ClientId}"
                       Watermark="Votre Client ID Xpollens"
                       AutomationProperties.Name="Client ID"
                       IsEnabled="{Binding !IsBusy}"/>

              <!-- Client Secret -->
              <TextBox shad:ControlAssist.Label="Client Secret"
                       Text="{Binding ClientSecret}"
                       PasswordChar="â€¢"
                       Watermark="Votre Client Secret"
                       AutomationProperties.Name="Client Secret"
                       IsEnabled="{Binding !IsBusy}"/>

              <!-- App User ID -->
              <TextBox shad:ControlAssist.Label="App User ID"
                       Text="{Binding AppUserId}"
                       Watermark="Votre App User ID"
                       AutomationProperties.Name="App User ID"
                       IsEnabled="{Binding !IsBusy}"/>

              <!-- Remember credentials -->
              <CheckBox IsChecked="{Binding RememberCredentials}"
                        Content="Enregistrer sur cet appareil"
                        IsEnabled="{Binding !IsBusy}"
                        FontSize="14"/>

              <!-- Error message -->
              <Border Background="#FFF1F0"
                      CornerRadius="{DynamicResource RadiusSm}"
                      Padding="12,10"
                      IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                      BorderBrush="#FF4D4F"
                      BorderThickness="1">
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#FF4D4F"
                           TextWrapping="Wrap"
                           FontSize="13"
                           AutomationProperties.LiveSetting="Assertive"/>
              </Border>

              <!-- Login button -->
              <Button Classes="Primary"
                      Content="Commencer â†’"
                      Command="{Binding LoginCommand}"
                      HorizontalAlignment="Stretch"
                      IsEnabled="{Binding !IsBusy}"
                      shad:ButtonAssist.ShowProgress="{Binding IsBusy}"
                      FontSize="15"
                      Padding="16,14"/>

            </StackPanel>
          </shad:Card>

          <!-- Connection info section -->
          <StackPanel HorizontalAlignment="Center" Spacing="12" Margin="0,16,0,32">
            <StackPanel HorizontalAlignment="Center" Spacing="6" Orientation="Horizontal">
              <TextBlock Text="ðŸ”" FontSize="16"/>
              <TextBlock Text="Connexion"
                         FontSize="13"
                         Foreground="{DynamicResource MutedColor}"
                         VerticalAlignment="Center"/>
            </StackPanel>
            <StackPanel HorizontalAlignment="Center" Spacing="6" Orientation="Horizontal">
              <TextBlock Text="ðŸ“" FontSize="16"/>
              <TextBlock Text="Inscription"
                         FontSize="13"
                         Foreground="{DynamicResource MutedColor}"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </StackPanel>

          <TextBlock Text="v1.0 â€” EcoBank Â© 2025"
                     Foreground="{DynamicResource MutedColor}"
                     FontSize="11"
                     HorizontalAlignment="Center"/>
        </StackPanel>
      </StackPanel>
    </ScrollViewer>
  </Grid>
</UserControl>
