<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:EcoBank.App.ViewModels.Accounts"
             xmlns:domain="using:EcoBank.Core.Domain.Accounts"
             xmlns:shad="clr-namespace:ShadUI;assembly=ShadUI"
             x:Class="EcoBank.App.Views.Accounts.AccountsView"
             x:DataType="vm:AccountsViewModel">

  <DockPanel>
    <Border DockPanel.Dock="Top" Padding="16,12">
      <TextBlock Text="Mes comptes" FontSize="22" FontWeight="SemiBold"/>
    </Border>

    <shad:Loading DockPanel.Dock="Top" IsVisible="{Binding IsBusy}"/>

    <ScrollViewer>
      <StackPanel Margin="16" Spacing="12">
        <ItemsControl ItemsSource="{Binding Accounts}">
          <ItemsControl.ItemTemplate>
            <DataTemplate x:DataType="domain:Account">
              <shad:Card Margin="0,0,0,4">
                <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto,Auto">
                  <shad:CardTitle Grid.Row="0" Grid.Column="0"
                                  Content="{Binding Label}"/>
                  <shad:CardDescription Grid.Row="1" Grid.Column="0"
                                        Content="{Binding Iban}"
                                        IsVisible="{Binding Iban, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                  <shad:CardDescription Grid.Row="2" Grid.Column="0"
                                        Content="{Binding Status}"/>
                  <TextBlock Grid.Row="0" Grid.Column="1" Grid.RowSpan="3"
                             FontSize="22"
                             FontWeight="Bold"
                             VerticalAlignment="Center"
                             Margin="8,0,0,0">
                    <TextBlock.Text>
                      <MultiBinding StringFormat="{}{0:N2} {1}">
                        <Binding Path="Balance"/>
                        <Binding Path="Currency"/>
                      </MultiBinding>
                    </TextBlock.Text>
                  </TextBlock>
                </Grid>
              </shad:Card>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </StackPanel>
    </ScrollViewer>
  </DockPanel>
</UserControl>
